<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Phobos — 3D Art with Futuristic Essay Box</title>

  <!-- Google font for a futuristic feel -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#03040b;
      --glass-1: rgba(255,255,255,0.04);
      --glass-2: rgba(255,255,255,0.06);
      --accent: rgba(120,200,255,0.9);
      --text: rgba(230,235,240,0.95);
      --muted: rgba(200,210,220,0.65);
    }

    html,body{
      height:100%;
      margin:0;
      background: radial-gradient(ellipse at 30% 10%, #08121f 0%, #03040b 30%, #000 100%);
      font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      color:var(--text);
      overflow:hidden;
    }

    /* Canvas fills the page */
    #three-container{
      position:fixed;
      inset:0;
      z-index:0;
    }

    /* Futuristic glass box overlay */
    .glass-panel{
      position: absolute;
      right: clamp(12px, 6vw, 60px);
      top: clamp(40px, 6vh, 80px);
      width: min(48vw, 640px);
      max-width: calc(100% - 40px);
      height: min(58vh, 560px);
      padding: 28px;
      border-radius: 18px;
      background: linear-gradient(135deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border: 1px solid rgba(255,255,255,0.06);
      box-shadow: 0 8px 40px rgba(0,0,0,0.6), inset 0 1px rgba(255,255,255,0.02);
      backdrop-filter: blur(8px) saturate(120%);
      -webkit-backdrop-filter: blur(8px) saturate(120%);
      z-index:2;
      display:flex;
      flex-direction:column;
      gap:12px;
    }

    .glass-header{
      display:flex;
      align-items:center;
      gap:12px;
    }

    .glow-dot{
      width:12px;height:12px;border-radius:50%;
      background:linear-gradient(180deg, var(--accent), rgba(80,170,230,0.8));
      box-shadow: 0 0 14px rgba(80,170,230,0.35), 0 0 28px rgba(80,170,230,0.12);
      border: 1px solid rgba(255,255,255,0.12);
    }

    .title{
      font-family: "Orbitron", sans-serif;
      font-weight:700;
      letter-spacing:0.06em;
      font-size: clamp(14px, 1.6vw, 18px);
      color:var(--text);
      text-transform:uppercase;
    }

    .subtitle{
      font-size: 12px;
      color:var(--muted);
      margin-left:auto;
      font-weight:500;
    }

    .essay {
      flex:1;
      overflow:auto;
      padding-right:6px;
      color:var(--text);
      font-size: clamp(13px, 1.05vw, 16px);
      line-height:1.55;
    }

    /* subtle scrollbar */
    .essay::-webkit-scrollbar{ width:8px; }
    .essay::-webkit-scrollbar-thumb{
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.04));
      border-radius:8px;
      border: 1px solid rgba(255,255,255,0.02);
      backdrop-filter: blur(4px);
    }

    .essay p{ margin:0 0 12px 0; color:var(--muted); }

    /* small footer controls */
    .panel-footer{
      display:flex;
      align-items:center;
      gap:8px;
      justify-content:space-between;
      margin-top:6px;
    }
    .btn{
      padding:8px 12px;
      border-radius:10px;
      background: linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border: 1px solid rgba(255,255,255,0.05);
      font-size:13px;
      color:var(--text);
      cursor:pointer;
      user-select:none;
    }
    .accent{
      display:inline-flex;
      align-items:center;
      gap:8px;
      background: linear-gradient(90deg, rgba(120,200,255,0.08), rgba(80,160,220,0.04));
      border: 1px solid rgba(120,200,255,0.12);
      color:var(--accent);
      box-shadow: 0 6px 26px rgba(20,40,70,0.45);
    }

    /* small mobile rearrangement */
    @media (max-width:820px){
      .glass-panel{
        left: 16px;
        right: 16px;
        top: 12px;
        width: calc(100% - 32px);
        height: 48vh;
        padding:18px;
        border-radius:14px;
      }
    }

    /* subtle overlay vignette for depth */
    .vignette{
      position: absolute;
      inset:0;
      pointer-events:none;
      background: radial-gradient(ellipse at 50% 20%, rgba(0,0,0,0) 0%, rgba(0,0,0,0.12) 40%, rgba(0,0,0,0.45) 100%);
      z-index:1;
    }

    /* small legend */
    .legend{
      position: absolute;
      left: 18px;
      bottom: 18px;
      z-index:2;
      color:var(--muted);
      font-size:12px;
      background: rgba(0,0,0,0.2);
      padding:8px 12px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.03);
      backdrop-filter: blur(6px);
    }
  </style>
</head>
<body>
  <div id="three-container"></div>

  <div class="glass-panel" role="region" aria-label="Essay about Phobos">
    <div class="glass-header">
      <div class="glow-dot" aria-hidden="true"></div>
      <div class="title">Phobos — Reflections</div>
      <div class="subtitle">by your name</div>
    </div>

    <div class="essay" id="essay">
      <p><strong>Introduction</strong></p>
      <p>Phobos drifts close to its parent, a battered satellite orbiting Mars. In its scarred surface and irregular shape, one finds a narrative about proximity and vulnerability — a small world that has felt the rawness of collisions and the patience of cosmic tides. This essay explores the significance of building perspective from the edge: to study the small, worn things that tell bigger stories.</p>

      <p><strong>Surface & character</strong></p>
      <p>Despite its size, Phobos reads like a map of time. Its grooves and pockmarks trace a violent past; its quick orbital dance suggests urgency. In contemplating Phobos we find a poetic tension: motion constrained by gravity, quiet surfaces marked by loud impacts.</p>

      <p><strong>Why it matters</strong></p>
      <p>Studying small worlds stretches our definitions of place. Phobos invites questions about scale, about how a tiny moon can inform planetary history, mission architecture, and even human imagination. It asks us to learn to listen to subtle, surface-level clues that reveal deep processes.</p>

      <p><strong>Conclusion</strong></p>
      <p>Phobos is a reminder that grandeur is not only in size. The details — the grooves, orbits, and light — are where stories accumulate. We can treat it as a lens: by zooming in on the small and rough, we better understand the context that produced them.</p>
    </div>

    <div class="panel-footer">
      <div style="display:flex;gap:8px;align-items:center;">
        <div class="btn" onclick="downloadEssay()">Download</div>
        <div class="btn" onclick="copyEssay()">Copy</div>
      </div>
      <div class="btn accent" id="rotate-toggle">Pause Rotation</div>
    </div>
  </div>

  <div class="legend">Drag to rotate · Scroll to zoom · Double-click to reset</div>
  <div class="vignette"></div>

  <!-- Three.js scene -->
  <script type="module">
    import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.module.js';
    import { OrbitControls } from 'https://cdn.jsdelivr.net/npm/three@0.152.2/examples/jsm/controls/OrbitControls.js';

    // Renderer + scene + camera
    const container = document.getElementById('three-container');
    const renderer = new THREE.WebGLRenderer({ antialias: true, alpha:true });
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.outputColorSpace = THREE.SRGBColorSpace;
    container.appendChild(renderer.domElement);

    const scene = new THREE.Scene();
    scene.background = null; // page background shows through

    const camera = new THREE.PerspectiveCamera(45, window.innerWidth/window.innerHeight, 0.1, 2000);
    camera.position.set(0, 0.8, 3.5);

    // Lights
    const ambient = new THREE.AmbientLight(0xffffff, 0.35);
    scene.add(ambient);

    const rimLight = new THREE.DirectionalLight(0xc8e8ff, 0.9);
    rimLight.position.set(-2, 1.5, 2.5);
    scene.add(rimLight);

    const fill = new THREE.PointLight(0xfff2d6, 0.5, 15);
    fill.position.set(2.5, -1, 1);
    scene.add(fill);

    // Starfield (particles)
    const starsGeo = new THREE.BufferGeometry();
    const starCount = 1200;
    const positions = new Float32Array(starCount * 3);
    for (let i=0; i<starCount; i++){
      const r = 30 + Math.random()*100;
      const theta = Math.random()*Math.PI*2;
      const phi = Math.acos(2*Math.random()-1);
      positions[i*3] = r * Math.sin(phi)*Math.cos(theta);
      positions[i*3+1] = r * Math.sin(phi)*Math.sin(theta);
      positions[i*3+2] = r * Math.cos(phi);
    }
    starsGeo.setAttribute('position', new THREE.BufferAttribute(positions, 3));
    const starsMat = new THREE.PointsMaterial({ size: 0.03, sizeAttenuation:true, transparent: true, opacity:0.9 });
    const starPoints = new THREE.Points(starsGeo, starsMat);
    scene.add(starPoints);

    // Load textures (planetary texture used as stylized Phobos)
    const loader = new THREE.TextureLoader();
    // A moon texture from three.js examples (stylized, works as Phobos stand-in)
    const textureURL = 'https://cdn.jsdelivr.net/gh/mrdoob/three.js@master/examples/textures/planets/moon_1024.jpg';
    const rockTexture = loader.load(textureURL, () => { renderer.render(scene, camera); });

    // Create sphere with some roughness and subtle bump
    const geometry = new THREE.IcosahedronGeometry(1.05, 5); // slightly irregular tessellation for organic look
    const material = new THREE.MeshStandardMaterial({
      map: rockTexture,
      roughness: 0.9,
      metalness: 0.02,
      displacementScale: 0.02,
      clearcoat: 0.05
    });

    const phobos = new THREE.Mesh(geometry, material);
    phobos.rotation.x = 0.3;
    phobos.rotation.y = 0.2;
    scene.add(phobos);

    // Add tiny wobble rotation to simulate irregular spin
    let rotationEnabled = true;
    document.getElementById('rotate-toggle').addEventListener('click', () => {
      rotationEnabled = !rotationEnabled;
      document.getElementById('rotate-toggle').textContent = rotationEnabled ? 'Pause Rotation' : 'Resume Rotation';
    });

    // OrbitControls
    const controls = new OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;
    controls.dampingFactor = 0.08;
    controls.minDistance = 1.3;
    controls.maxDistance = 8;
    controls.enablePan = false;
    controls.autoRotate = false;

    // subtle rotation animation
    const clock = new THREE.Clock();

    function animate(){
      requestAnimationFrame(animate);
      const t = clock.getElapsedTime();

      // slow spin + micro wobble
      if (rotationEnabled) {
        phobos.rotation.y += 0.0016 + Math.sin(t*0.27)*0.00035;
        phobos.rotation.x += Math.cos(t*0.18)*0.00025;
      }

      // twinkling stars: slight position shift
      starPoints.rotation.y += 0.00008;

      controls.update();
      renderer.render(scene, camera);
    }
    animate();

    // Resize handling
    window.addEventListener('resize', () => {
      renderer.setSize(window.innerWidth, window.innerHeight);
      camera.aspect = window.innerWidth/window.innerHeight;
      camera.updateProjectionMatrix();
    });

    // Double-click to reset camera
    window.addEventListener('dblclick', () => {
      camera.position.set(0, 0.8, 3.5);
      controls.target.set(0,0,0);
      controls.update();
    });

    // Accessibility: if WebGL fails
    if (!renderer.capabilities.isWebGL2 && !renderer.capabilities.isWebGL) {
      const warn = document.createElement('div');
      warn.style.position='absolute';
      warn.style.left='12px';
      warn.style.top='12px';
      warn.style.padding='10px 14px';
      warn.style.background='rgba(0,0,0,0.6)';
      warn.style.color='white';
      warn.style.borderRadius='8px';
      warn.textContent = 'WebGL not available — please use an updated browser or enable hardware acceleration.';
      document.body.appendChild(warn);
    }

    // Essay utilities (download / copy)
    function getEssayText(){
      return document.getElementById('essay').innerText;
    }

    window.copyEssay = () => {
      const text = getEssayText();
      navigator.clipboard?.writeText(text).then(() => {
        const btn = document.querySelector('.btn:not(.accent)');
        btn.textContent = 'Copied';
        setTimeout(()=> btn.textContent = 'Download', 1200);
      }).catch(()=> alert('Copy not available in this browser.'));
    };

    window.downloadEssay = () => {
      const txt = getEssayText();
      const blob = new Blob([txt], {type:'text/plain;charset=utf-8'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'phobos-essay.txt';
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    };

  </script>
</body>
</html>
